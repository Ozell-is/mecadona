{% extends "component/skeleton.html" %}


    {% block title %}
        catalog
    {% endblock title%}

{% block head %}
        <link rel="stylesheet" href="../static/bootstrap/css/bootstrap.min.css">
        <style>

        .product-grid7 {
            border: 1px solid #ccc;
            padding: 10px;
            margin: 10px;
            text-align: center;
        }
    </style>
{% endblock %}

{% block content %}
    <div class="container mtr-5 mb-2">
    <div class="row">
{% include 'component/category_tools.html' %}
    {% include "component/catalog.html" %}

 </div>
</div>


    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="../static/bootstrap/js/bootstrap.min.js"></script>
 <script>
   document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('filterButton').addEventListener('click', function() {
        let selectedCategory = document.getElementById('categoryFilter').value;


        fetch('/filter_by_category', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ 'category_libelle': selectedCategory }),
        })
        .then(response => {
            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }
            return response.json();
        })
        .then(data => {
            // Mettez à jour la liste des produits affichés
            document.getElementById('productList').innerHTML=data.products;


            // Affiche l'ID de la catégorie
            console.log( data.products);
        })
        .catch(error => console.error('Error:', error));
    });
});
    </script>

{% endblock %}